"use strict";
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildDecrypt = void 0;
const decrypt_stream_1 = require("./decrypt_stream");
const decrypt_1 = require("./decrypt");
const material_management_node_1 = require("@aws-crypto/material-management-node");
function buildDecrypt(options) {
    const { commitmentPolicy, maxEncryptedDataKeys = false } = typeof options === 'string' ? { commitmentPolicy: options } : options;
    /* Precondition: node buildDecrypt needs a valid commitmentPolicy. */
    material_management_node_1.needs(material_management_node_1.CommitmentPolicy[commitmentPolicy], 'Invalid commitment policy.');
    /* Precondition: node buildDecrypt needs a valid maxEncryptedDataKeys. */
    material_management_node_1.needs(maxEncryptedDataKeys === false || maxEncryptedDataKeys >= 1, 'Invalid maxEncryptedDataKeys value.');
    const clientOptions = {
        commitmentPolicy,
        maxEncryptedDataKeys,
    };
    return {
        decryptUnsignedMessageStream: decrypt_stream_1._decryptStream.bind({}, {
            signaturePolicy: material_management_node_1.SignaturePolicy.ALLOW_ENCRYPT_FORBID_DECRYPT,
            clientOptions,
        }),
        decryptStream: decrypt_stream_1._decryptStream.bind({}, {
            signaturePolicy: material_management_node_1.SignaturePolicy.ALLOW_ENCRYPT_ALLOW_DECRYPT,
            clientOptions,
        }),
        decrypt: decrypt_1._decrypt.bind({}, {
            signaturePolicy: material_management_node_1.SignaturePolicy.ALLOW_ENCRYPT_ALLOW_DECRYPT,
            clientOptions,
        }),
    };
}
exports.buildDecrypt = buildDecrypt;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjcnlwdF9jbGllbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGVjcnlwdF9jbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG9FQUFvRTtBQUNwRSxzQ0FBc0M7OztBQUV0QyxxREFBaUQ7QUFDakQsdUNBQW9DO0FBQ3BDLG1GQUs2QztBQVM3QyxTQUFnQixZQUFZLENBQzFCLE9BQXlDO0lBVXpDLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxvQkFBb0IsR0FBRyxLQUFLLEVBQUUsR0FDdEQsT0FBTyxPQUFPLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLGdCQUFnQixFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUE7SUFFdkUscUVBQXFFO0lBQ3JFLGdDQUFLLENBQUMsMkNBQWdCLENBQUMsZ0JBQWdCLENBQUMsRUFBRSw0QkFBNEIsQ0FBQyxDQUFBO0lBQ3ZFLHlFQUF5RTtJQUN6RSxnQ0FBSyxDQUNILG9CQUFvQixLQUFLLEtBQUssSUFBSSxvQkFBb0IsSUFBSSxDQUFDLEVBQzNELHFDQUFxQyxDQUN0QyxDQUFBO0lBRUQsTUFBTSxhQUFhLEdBQWtCO1FBQ25DLGdCQUFnQjtRQUNoQixvQkFBb0I7S0FDckIsQ0FBQTtJQUNELE9BQU87UUFDTCw0QkFBNEIsRUFBRSwrQkFBYyxDQUFDLElBQUksQ0FDL0MsRUFBRSxFQUNGO1lBQ0UsZUFBZSxFQUFFLDBDQUFlLENBQUMsNEJBQTRCO1lBQzdELGFBQWE7U0FDZCxDQUNGO1FBQ0QsYUFBYSxFQUFFLCtCQUFjLENBQUMsSUFBSSxDQUNoQyxFQUFFLEVBQ0Y7WUFDRSxlQUFlLEVBQUUsMENBQWUsQ0FBQywyQkFBMkI7WUFDNUQsYUFBYTtTQUNkLENBQ0Y7UUFDRCxPQUFPLEVBQUUsa0JBQVEsQ0FBQyxJQUFJLENBQ3BCLEVBQUUsRUFDRjtZQUNFLGVBQWUsRUFBRSwwQ0FBZSxDQUFDLDJCQUEyQjtZQUM1RCxhQUFhO1NBQ2QsQ0FDRjtLQUNGLENBQUE7QUFDSCxDQUFDO0FBakRELG9DQWlEQyJ9