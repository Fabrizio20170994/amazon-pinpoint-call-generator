"use strict";
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildEncrypt = void 0;
const encrypt_stream_1 = require("./encrypt_stream");
const encrypt_1 = require("./encrypt");
const material_management_node_1 = require("@aws-crypto/material-management-node");
function buildEncrypt(options) {
    const { commitmentPolicy, maxEncryptedDataKeys = false } = typeof options === 'string' ? { commitmentPolicy: options } : options;
    /* Precondition: node buildEncrypt needs a valid commitmentPolicy. */
    material_management_node_1.needs(material_management_node_1.CommitmentPolicy[commitmentPolicy], 'Invalid commitment policy.');
    /* Precondition: node buildEncrypt needs a valid maxEncryptedDataKeys. */
    material_management_node_1.needs(maxEncryptedDataKeys === false || maxEncryptedDataKeys >= 1, 'Invalid maxEncryptedDataKeys value.');
    const clientOptions = {
        commitmentPolicy,
        maxEncryptedDataKeys,
    };
    return {
        encryptStream: encrypt_stream_1._encryptStream.bind({}, clientOptions),
        encrypt: encrypt_1._encrypt.bind({}, clientOptions),
    };
}
exports.buildEncrypt = buildEncrypt;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW5jcnlwdF9jbGllbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZW5jcnlwdF9jbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG9FQUFvRTtBQUNwRSxzQ0FBc0M7OztBQUV0QyxxREFBaUQ7QUFDakQsdUNBQW9DO0FBQ3BDLG1GQUk2QztBQVM3QyxTQUFnQixZQUFZLENBQzFCLE9BQXlDO0lBT3pDLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxvQkFBb0IsR0FBRyxLQUFLLEVBQUUsR0FDdEQsT0FBTyxPQUFPLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLGdCQUFnQixFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUE7SUFFdkUscUVBQXFFO0lBQ3JFLGdDQUFLLENBQUMsMkNBQWdCLENBQUMsZ0JBQWdCLENBQUMsRUFBRSw0QkFBNEIsQ0FBQyxDQUFBO0lBQ3ZFLHlFQUF5RTtJQUN6RSxnQ0FBSyxDQUNILG9CQUFvQixLQUFLLEtBQUssSUFBSSxvQkFBb0IsSUFBSSxDQUFDLEVBQzNELHFDQUFxQyxDQUN0QyxDQUFBO0lBRUQsTUFBTSxhQUFhLEdBQWtCO1FBQ25DLGdCQUFnQjtRQUNoQixvQkFBb0I7S0FDckIsQ0FBQTtJQUNELE9BQU87UUFDTCxhQUFhLEVBQUUsK0JBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLGFBQWEsQ0FBQztRQUNyRCxPQUFPLEVBQUUsa0JBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLGFBQWEsQ0FBQztLQUMxQyxDQUFBO0FBQ0gsQ0FBQztBQTNCRCxvQ0EyQkMifQ==